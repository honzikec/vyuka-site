---
import Logo from './Logo.astro';
---

<nav
  class="sticky top-0 z-10 block w-full max-w-full px-4 py-2 text-white bg-white dark:bg-slate-950 rounded-none shadow-md h-max bg-opacity-60 backdrop-blur-2xl backdrop-saturate-200 lg:px-8 lg:py-4"
>
  <div class="flex items-center justify-between text-blue-gray-900 dark:text-white">
    <a
      href="/"
      class="mr-4 block cursor-pointer py-1.5 font-sans text-base font-medium leading-relaxed text-inherit antialiased"
    >
      <Logo />
    </a>
    <div class="flex items-center gap-4">
      <div class="flex items-center gap-x-1">
        <button
          id="btn-toggle-theme"
          class="relative align-middle select-none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-10 max-w-[40px] h-10 max-h-[40px] text-xs text-gray-900 hover:bg-gray-900/10 active:bg-gray-900/20 dark:text-gray-50 dark:hover:bg-slate-800 rounded-full"
          type="button"
          aria-label="Toggle theme"
        >
          <span class="absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2">
            <span class="dark:hidden">
              <span class="material-icons">dark_mode</span>
            </span>
            <span class="hidden dark:inline">
              <span class="material-icons">light_mode</span>
            </span>
          </span>
        </button>
      </div>
    </div>
  </div>
</nav>

<script is:inline>
  function handleToggleClick() {
    console.log("Toggle clicked");
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    console.log("Is dark?", isDark);
    localStorage.setItem("theme", isDark ? "dark" : "light");
  }

  const btn = document.getElementById("btn-toggle-theme");
  console.log("Button found?", btn);
  btn?.addEventListener("click", handleToggleClick);
</script>
